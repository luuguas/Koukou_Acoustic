<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>仮装 - 音響機材</title>
    <link href="lib/reset.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
    <script type="text/javascript" src="lib/jquery-3.6.0.min.js"></script>
    <script type="text/javascript" src="lib/vue.js"></script>
    <script type="text/javascript" src="lib/Sortable.min.js"></script>
    <script type="text/javascript" src="lib/vuedraggable.umd.min.js"></script>
    <script type="text/javascript" src="script.js"></script>
</head>

<body>
    <div id="bgm">
        <h2>BGM</h2>
        <div class="setting">
            <div class="file">
                <button
                    type="button" class="load-last-folder"
                    :disabled="!hasHistory"
                @click="onLoadLastFolder"
                >前回のフォルダを開く</button>
                <button
                    type="button" class="open-folder"
                    @click="onOpenFolder"
                >フォルダを開く...</button>
            </div>
            <div class="fadeout">
                <label>一時停止時のフェードアウト:</label>
                <select class="fadeout-select" v-model="fadeOutDuration" @change="onFadeOutDurationChange">
                    <option :value="0" selected>なし</option>
                    <option :value="500">0.5秒</option>
                    <option :value="1000">1.0秒</option>
                    <option :value="1500">1.5秒</option>
                    <option :value="2000">2.0秒</option>
                    <option :value="2500">2.5秒</option>
                    <option :value="3000">3.0秒</option>
                </select>
            </div>
        </div>
        <draggable v-model="fileList" v-bind="dragOptions" @end="onEnd">
            <transition-group class="panels">
                <bgm-player
                    :file="file" :playing-key="playingKey" :fade-out-duration="fadeOutDuration"
                    v-for="file in fileList" :key="file.key"
                    @play-request="onPlayRequest"
                    @standby="onStandby"
                ></bgm-player>
            </transition-group>
        </draggable>
    </div>
    <div id="se">
        <h2>SE</h2>
        <div class="file">
            <button
                type="button" class="load-last-folder"
                :disabled="!hasHistory"
                @click="onLoadLastFolder"
            >前回のフォルダを開く</button>
            <button
                type="button" class="open-folder"
                @click="onOpenFolder"
            >フォルダを開く...</button>
        </div>
        <draggable v-model="fileList" v-bind="dragOptions" @end="onEnd">
            <transition-group class="panels">
                <se-player
                    :file="file"
                    v-for="file in fileList" :key="file.key"
                ></se-player>
            </transition-group>
        </draggable>
    </div>
    <div id="preload" hidden>
        <img :src="path" v-for="path in pathList">
    </div>
</body>

</html>